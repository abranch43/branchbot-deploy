---
name: branchbot-weekly

on:
  schedule:
    - cron: "0 12 * * 1" # Mondays 12:00 UTC
  workflow_dispatch:

jobs:
  weekly:
    name: weekly
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: "3.11"
          cache: "pip"
      - name: Install runtime deps (if any)
        run: |
          python -m pip install --upgrade pip
          if [ -f requirements.txt ]; then pip install -r requirements.txt; fi
      - name: Run weekly tasks if present
        run: |
          set -e
          if [ -f finance/ingest.py ]; then
            python finance/ingest.py
          else
            echo "finance/ingest.py not found; skipping."
          fi
